{"ast":null,"code":"var _jsxFileName = \"/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/components/deleteButton.js\";\nimport React, { useState } from 'react';\nimport { Button, Icon, Confrim } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { gql, useMutation } from '@apollo/client';\nimport { FETCH_POSTS_QUERY } from '../util/graphQL';\n\nconst deleteButton = ({\n  postId,\n  callback\n}) => {\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [deletePost] = useMutation(DELETE_POST_MUTATION, {\n    update: proxy => {\n      setConfirmOpen(false);\n      const data = proxy.readQuery({\n        query: FETCH_POSTS_QUERY\n      });\n      data.getPosts = data.getPosts.filter(p => p.id !== postId);\n      proxy.writeQuery({\n        query: FETCH_POSTS_QUERY.data\n      });\n      if (callback) callback();\n    },\n    variables: {\n      postId\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    floated: \"right\",\n    as: Link,\n    to: \"/login\",\n    color: \"red\",\n    onClick: () => setConfirmOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash alternate outline\",\n    style: {\n      margin: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Confirm, {\n    open: confirmOpen,\n    onCancel: () => setConfirmOpen(false),\n    onConfirm: () => deletePost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }\n  }));\n};\n\nconst DELETE_POST_MUTATION = gql`\n  mutation deletePost($postId: ID!){\n    deletePost(postId: $postId)\n  }\n`;\nexport default deleteButton;","map":{"version":3,"sources":["/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/components/deleteButton.js"],"names":["React","useState","Button","Icon","Confrim","Link","gql","useMutation","FETCH_POSTS_QUERY","deleteButton","postId","callback","confirmOpen","setConfirmOpen","deletePost","DELETE_POST_MUTATION","update","proxy","data","readQuery","query","getPosts","filter","p","id","writeQuery","variables","margin"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,QAAqC,mBAArC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,GAAT,EAAcC,WAAd,QAAiC,gBAAjC;AACA,SAAQC,iBAAR,QAAgC,iBAAhC;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAACC,EAAAA,MAAD;AAASC,EAAAA;AAAT,CAAD,KAAwB;AAC3C,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACa,UAAD,IAAeP,WAAW,CAACQ,oBAAD,EAAuB;AACrDC,IAAAA,MAAM,EAAEC,KAAD,IAAW;AAChBJ,MAAAA,cAAc,CAAC,KAAD,CAAd;AACA,YAAMK,IAAI,GAAGD,KAAK,CAACE,SAAN,CAAgB;AAAEC,QAAAA,KAAK,EAAEZ;AAAT,OAAhB,CAAb;AACAU,MAAAA,IAAI,CAACG,QAAL,GAAgBH,IAAI,CAACG,QAAL,CAAcC,MAAd,CAAqBC,CAAC,IAAIA,CAAC,CAACC,EAAF,KAASd,MAAnC,CAAhB;AACAO,MAAAA,KAAK,CAACQ,UAAN,CAAiB;AAAEL,QAAAA,KAAK,EAAEZ,iBAAiB,CAAEU;AAA5B,OAAjB;AACA,UAAGP,QAAH,EAAaA,QAAQ;AAEtB,KARoD;AASrDe,IAAAA,SAAS,EAAE;AAAEhB,MAAAA;AAAF;AAT0C,GAAvB,CAAhC;AAYA,sBACE,uDACA,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,OAAhB;AAAwB,IAAA,EAAE,EAAEL,IAA5B;AAAkC,IAAA,EAAE,EAAC,QAArC;AAA8C,IAAA,KAAK,EAAC,KAApD;AAA0D,IAAA,OAAO,EAAE,MAAMQ,cAAc,CAAC,IAAD,CAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,yBAAX;AAAqC,IAAA,KAAK,EAAE;AAACc,MAAAA,MAAM,EAAE;AAAT,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADA,eAIA,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAEf,WAAf;AAA4B,IAAA,QAAQ,EAAE,MAAMC,cAAc,CAAC,KAAD,CAA1D;AAAmE,IAAA,SAAS,EAAE,MAAMC,UAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJA,CADF;AAQD,CAtBD;;AAwBA,MAAMC,oBAAoB,GAACT,GAAI;;;;CAA/B;AAMA,eAAeG,YAAf","sourcesContent":["import React, {useState} from 'react'\nimport { Button, Icon, Confrim} from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { gql, useMutation } from '@apollo/client';\nimport {FETCH_POSTS_QUERY} from '../util/graphQL';\n\nconst deleteButton = ({postId, callback}) => {\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [deletePost] = useMutation(DELETE_POST_MUTATION, { \n    update:(proxy) => {\n      setConfirmOpen(false);\n      const data = proxy.readQuery({ query: FETCH_POSTS_QUERY});\n      data.getPosts = data.getPosts.filter(p => p.id !== postId);\n      proxy.writeQuery({ query: FETCH_POSTS_QUERY. data});\n      if(callback) callback();\n      \n    },\n    variables: { postId }\n  })\n\n  return (\n    <>\n    <Button floated=\"right\" as={Link} to=\"/login\" color=\"red\" onClick={() => setConfirmOpen(true)}>\n      <Icon name=\"trash alternate outline\" style={{margin: 0}}/>\n    </Button>\n    <Confirm open={confirmOpen} onCancel={() => setConfirmOpen(false)} onConfirm={() => deletePost} />\n    </>\n  )\n}\n\nconst DELETE_POST_MUTATION=gql`\n  mutation deletePost($postId: ID!){\n    deletePost(postId: $postId)\n  }\n`;\n\nexport default deleteButton;\n"]},"metadata":{},"sourceType":"module"}