{"ast":null,"code":"var _jsxFileName = \"/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/components/deleteButton.js\";\n//* Imported Dependencies\nimport React, { useState } from 'react';\nimport { Button, Icon, Confirm } from 'semantic-ui-react';\nimport { useMutation } from '@apollo/client'; //* Imported GraphQL\n\nimport { FETCH_POSTS_QUERY, DELETE_POST_MUTATION, DELETE_COMMENT_MUTATION } from '../util/graphQL'; //* Imported Components\n\nimport MyPopup from '../util/mypopup';\n\nconst DeleteButton = ({\n  postId,\n  commentId,\n  callback\n}) => {\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const mutation = commentId ? DELETE_COMMENT_MUTATION : DELETE_POST_MUTATION;\n  const [deletePostOrMutation] = useMutation(mutation, {\n    update: proxy => {\n      setConfirmOpen(false);\n\n      if (!commentId) {\n        const data = proxy.readQuery({\n          query: FETCH_POSTS_QUERY\n        });\n        proxy.writeQuery({\n          query: FETCH_POSTS_QUERY,\n          data: {\n            getPosts: data.getPosts.filter(p => p.id !== postId)\n          }\n        });\n      }\n\n      if (callback) callback();\n    },\n    variables: {\n      postId,\n      commentId\n    }\n  });\n  const deleteButton = /*#__PURE__*/React.createElement(Button, {\n    floated: \"right\",\n    as: \"div\",\n    to: \"/login\",\n    color: \"red\",\n    onClick: () => setConfirmOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash alternate outline\",\n    style: {\n      margin: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MyPopup, {\n    content: \"Delete Post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, deleteButton), /*#__PURE__*/React.createElement(Confirm, {\n    open: confirmOpen,\n    onCancel: () => setConfirmOpen(false),\n    onConfirm: deletePostOrMutation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default DeleteButton;","map":{"version":3,"sources":["/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/components/deleteButton.js"],"names":["React","useState","Button","Icon","Confirm","useMutation","FETCH_POSTS_QUERY","DELETE_POST_MUTATION","DELETE_COMMENT_MUTATION","MyPopup","DeleteButton","postId","commentId","callback","confirmOpen","setConfirmOpen","mutation","deletePostOrMutation","update","proxy","data","readQuery","query","writeQuery","getPosts","filter","p","id","variables","deleteButton","margin"],"mappings":";AAAA;AACA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,QAAsC,mBAAtC;AACA,SAASC,WAAT,QAA4B,gBAA5B,C,CAEA;;AACA,SAAQC,iBAAR,EAA2BC,oBAA3B,EAAiDC,uBAAjD,QAA+E,iBAA/E,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,iBAApB;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAACC,EAAAA,MAAD;AAASC,EAAAA,SAAT;AAAoBC,EAAAA;AAApB,CAAD,KAAmC;AACtD,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAMe,QAAQ,GAAGJ,SAAS,GAAGJ,uBAAH,GAA6BD,oBAAvD;AAEA,QAAM,CAACU,oBAAD,IAAyBZ,WAAW,CAACW,QAAD,EAAW;AACnDE,IAAAA,MAAM,EAAEC,KAAD,IAAW;AAChBJ,MAAAA,cAAc,CAAC,KAAD,CAAd;;AACA,UAAG,CAACH,SAAJ,EAAc;AACZ,cAAMQ,IAAI,GAAGD,KAAK,CAACE,SAAN,CAAgB;AAAEC,UAAAA,KAAK,EAAEhB;AAAT,SAAhB,CAAb;AACAa,QAAAA,KAAK,CAACI,UAAN,CAAiB;AAAED,UAAAA,KAAK,EAAEhB,iBAAT;AAA4Bc,UAAAA,IAAI,EAAE;AAACI,YAAAA,QAAQ,EAAEJ,IAAI,CAACI,QAAL,CAAcC,MAAd,CAAqBC,CAAC,IAAIA,CAAC,CAACC,EAAF,KAAShB,MAAnC;AAAX;AAAlC,SAAjB;AACD;;AACD,UAAGE,QAAH,EAAaA,QAAQ;AAEtB,KATkD;AAUnDe,IAAAA,SAAS,EAAE;AAAEjB,MAAAA,MAAF;AAAUC,MAAAA;AAAV;AAVwC,GAAX,CAA1C;AAaA,QAAMiB,YAAY,gBAChB,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,OAAhB;AAAwB,IAAA,EAAE,EAAC,KAA3B;AAAiC,IAAA,EAAE,EAAC,QAApC;AAA6C,IAAA,KAAK,EAAC,KAAnD;AAAyD,IAAA,OAAO,EAAE,MAAMd,cAAc,CAAC,IAAD,CAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,yBAAX;AAAqC,IAAA,KAAK,EAAE;AAACe,MAAAA,MAAM,EAAE;AAAT,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAMA,sBACE,uDACE,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,YADH,CADF,eAIE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAEf,WAAf;AAA4B,IAAA,QAAQ,EAAE,MAAMC,cAAc,CAAC,KAAD,CAA1D;AAAmE,IAAA,SAAS,EAAEE,oBAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADF;AAQD,CA/BD;;AAmCA,eAAeP,YAAf","sourcesContent":["//* Imported Dependencies\nimport React, {useState} from 'react';\nimport { Button, Icon, Confirm } from 'semantic-ui-react';\nimport { useMutation } from '@apollo/client';\n\n//* Imported GraphQL\nimport {FETCH_POSTS_QUERY, DELETE_POST_MUTATION, DELETE_COMMENT_MUTATION} from '../util/graphQL';\n\n//* Imported Components\nimport MyPopup from '../util/mypopup';\n\nconst DeleteButton = ({postId, commentId, callback}) => {\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const mutation = commentId ? DELETE_COMMENT_MUTATION : DELETE_POST_MUTATION;\n\n  const [deletePostOrMutation] = useMutation(mutation, { \n    update:(proxy) => {\n      setConfirmOpen(false);\n      if(!commentId){\n        const data = proxy.readQuery({ query: FETCH_POSTS_QUERY});\n        proxy.writeQuery({ query: FETCH_POSTS_QUERY, data: {getPosts: data.getPosts.filter(p => p.id !== postId)}});\n      }\n      if(callback) callback();\n      \n    },\n    variables: { postId, commentId }\n  })\n\n  const deleteButton = (\n    <Button floated=\"right\" as=\"div\" to=\"/login\" color=\"red\" onClick={() => setConfirmOpen(true)}>\n      <Icon name=\"trash alternate outline\" style={{margin: 0}}/>\n    </Button>\n  )\n\n  return (\n    <>\n      <MyPopup content=\"Delete Post\">\n        {deleteButton}\n      </MyPopup>\n      <Confirm open={confirmOpen} onCancel={() => setConfirmOpen(false)} onConfirm={deletePostOrMutation} />\n    </>\n  )\n}\n\n\n\nexport default DeleteButton;\n"]},"metadata":{},"sourceType":"module"}