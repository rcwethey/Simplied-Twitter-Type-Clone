{"ast":null,"code":"var _jsxFileName = \"/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/Pages/SinglePost.js\";\nimport React, { useContext } from 'react';\nimport { gql, useQuery } from '@apollo/react-hooks';\nimport moment from 'moment';\nimport { Button, Card, Grid, Image, Icon, Label } from 'semantic-ui-react';\nimport { AuthContext } from '../context/auth';\nimport LikeButton from '../components/likeButton';\nimport DeleteButton from '../components/deleteButton';\n\nfunction SinglePost(props) {\n  const postId = props.match.params.postId;\n  const {\n    user\n  } = useContext(AuthContext);\n  const {\n    data: {\n      getPost\n    } = {}\n  } = useQuery(FETCH_POST_QUERY, {\n    variables: {\n      postId\n    }\n  });\n\n  const deletePostCallback = () => props.history.push('/');\n\n  let postMarkup;\n\n  if (!getPost) {\n    //TODO: Put a spinner here\n    postMarkup = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 18\n      }\n    }, \"Loading post..\");\n  } else {\n    if (!loading) {\n      const {\n        id,\n        body,\n        createdAt,\n        username,\n        comments,\n        likes,\n        likeCount,\n        commentCount\n      } = getPost;\n    }\n\n    postMarkup = /*#__PURE__*/React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: \"https://react.semantic-ui.com/images/avatar/large/molly.png\",\n      size: \"small\",\n      float: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }\n    }, username), /*#__PURE__*/React.createElement(Card.Meta, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }\n    }, moment(createdAt).fromNow()), /*#__PURE__*/React.createElement(Card.Description, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }\n    }, body)), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Card.Content, {\n      extra: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(LikeButton, {\n      user: user,\n      post: {\n        id,\n        likeCount,\n        likes\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      as: \"div\",\n      labelPosition: \"right\",\n      onClick: () => console.log('Comment on post'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      basic: true,\n      color: \"blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"comments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Label, {\n      basic: true,\n      color: \"blue\",\n      pointing: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 19\n      }\n    }, commentCount)), user && user.username === username && /*#__PURE__*/React.createElement(DeleteButton, {\n      postId: id,\n      callback: deletePostCallback,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 19\n      }\n    }))))));\n  }\n\n  return postMarkup;\n}\n\nconst FETCH_POST_QUERY = gql`\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n`;\nexport default SinglePost;","map":{"version":3,"sources":["/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/Pages/SinglePost.js"],"names":["React","useContext","gql","useQuery","moment","Button","Card","Grid","Image","Icon","Label","AuthContext","LikeButton","DeleteButton","SinglePost","props","postId","match","params","user","data","getPost","FETCH_POST_QUERY","variables","deletePostCallback","history","push","postMarkup","loading","id","body","createdAt","username","comments","likes","likeCount","commentCount","fromNow","console","log"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { gql, useQuery } from '@apollo/react-hooks';\nimport moment from 'moment';\nimport { Button, Card, Grid, Image, Icon, Label } from 'semantic-ui-react';\nimport { AuthContext } from '../context/auth';\nimport LikeButton from '../components/likeButton';\nimport DeleteButton from '../components/deleteButton';\n\nfunction SinglePost(props) {\n  const postId = props.match.params.postId;\n  const { user } = useContext(AuthContext);\n  const { data: { getPost } ={}} = useQuery(FETCH_POST_QUERY, { variables: {postId} });\n  const deletePostCallback = () => props.history.push('/');\n  let postMarkup;\n\n  if (!getPost) {\n    //TODO: Put a spinner here\n    postMarkup = <p>Loading post..</p>;\n  } else {\n    if(!loading){\n      const { id, body, createdAt, username, comments, likes, likeCount, commentCount } = getPost;\n    }\n\n    postMarkup = (\n      <Grid>\n        <Grid.Row>\n          <Grid.Column width={2}>\n            <Image\n              src=\"https://react.semantic-ui.com/images/avatar/large/molly.png\"\n              size=\"small\"\n              float=\"right\"\n            />\n          </Grid.Column>\n          <Grid.Column width={10}>\n            <Card fluid>\n              <Card.Content>\n                <Card.Header>{username}</Card.Header>\n                <Card.Meta>{moment(createdAt).fromNow()}</Card.Meta>\n                <Card.Description>{body}</Card.Description>\n              </Card.Content>\n              <hr />\n              <Card.Content extra>\n                <LikeButton user={user} post={{ id, likeCount, likes }} />\n                <Button\n                  as=\"div\"\n                  labelPosition=\"right\"\n                  onClick={() => console.log('Comment on post')}\n                >\n                  <Button basic color=\"blue\">\n                    <Icon name=\"comments\" />\n                  </Button>\n                  <Label basic color=\"blue\" pointing=\"left\">\n                    {commentCount}\n                  </Label>\n                </Button>\n                {user && user.username === username && (\n                  <DeleteButton postId={id} callback={deletePostCallback} />\n                )}\n              </Card.Content>\n            </Card>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    );\n  }\n  return postMarkup;\n}\n\nconst FETCH_POST_QUERY = gql`\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n`;\n\nexport default SinglePost;"]},"metadata":{},"sourceType":"module"}