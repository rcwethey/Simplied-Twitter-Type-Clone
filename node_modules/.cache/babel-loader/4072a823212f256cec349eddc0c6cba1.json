{"ast":null,"code":"var _jsxFileName = \"/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/Pages/Login.js\";\nimport React, { useState, useContext } from 'react';\nimport { Form, Button } from 'semantic-ui-react';\nimport { useMutation } from '@apollo/client';\nimport { useForm } from '../util/hooks';\nimport '../App.css';\nimport { LOGIN_USER } from '../util/graphQL';\nimport { AuthContext } from '../context/auth';\n\nconst Login = props => {\n  const context = useContext(AuthContext);\n  const [errors, setErrors] = useState({});\n  const {\n    onSubmit,\n    onChange,\n    values\n  } = useForm(loginUserCallback, {\n    username: '',\n    password: ''\n  });\n  const [loginUser, {\n    loading\n  }] = useMutation(LOGIN_USER, {\n    update: (_, {\n      data: {\n        login: userData\n      }\n    }) => {\n      context.login(userData);\n      props.history.push('/');\n    },\n    onError: err => {\n      setErrors(err.graphQLErrors[0].extensions.exception.errors);\n    },\n    variables: values\n  });\n\n  function loginUserCallback() {\n    loginUser();\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    noValidate: true,\n    className: loading ? 'loading' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Username\",\n    placeholder: \"Username..\",\n    name: \"username\",\n    type: \"text\",\n    value: values.username,\n    error: errors.username ? true : false,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    label: \"Password\",\n    placeholder: \"Password..\",\n    name: \"password\",\n    type: \"password\",\n    value: values.password,\n    error: errors.password ? true : false,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    primary: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"Login\")), Object.keys(errors).length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui error message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, Object.values(errors).map(value => /*#__PURE__*/React.createElement(\"li\", {\n    key: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, value)))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/Pages/Login.js"],"names":["React","useState","useContext","Form","Button","useMutation","useForm","LOGIN_USER","AuthContext","Login","props","context","errors","setErrors","onSubmit","onChange","values","loginUserCallback","username","password","loginUser","loading","update","_","data","login","userData","history","push","onError","err","graphQLErrors","extensions","exception","variables","Object","keys","length","map","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Form, Button } from 'semantic-ui-react';\nimport { useMutation } from '@apollo/client';\nimport { useForm } from '../util/hooks';\nimport '../App.css';\nimport {LOGIN_USER} from '../util/graphQL';\nimport { AuthContext } from '../context/auth';\n\nconst Login = props => {\n  const context = useContext(AuthContext);\n  const [errors, setErrors] = useState({})\n  const { onSubmit, onChange, values } = useForm(loginUserCallback, {\n    username: '',\n    password: ''\n  })\n\n  const [loginUser, { loading }] = useMutation(LOGIN_USER, {\n    update: (_, { data: { login: userData } })=>{\n      context.login(userData);\n      props.history.push('/');\n    },\n    onError: err => { setErrors(err.graphQLErrors[0].extensions.exception.errors); },\n    variables: values\n  });\n\n  function loginUserCallback(){ loginUser(); }\n\n  return (\n    <div className=\"form-container\">\n      <Form onSubmit={onSubmit} noValidate className={loading ? 'loading' : ''}>\n        <h1>Login</h1>\n        <Form.Input\n          label=\"Username\"\n          placeholder=\"Username..\"\n          name=\"username\"\n          type=\"text\"\n          value={values.username}\n          error={errors.username ? true : false}\n          onChange={onChange}\n        />\n        <Form.Input\n          label=\"Password\"\n          placeholder=\"Password..\"\n          name=\"password\"\n          type=\"password\"\n          value={values.password}\n          error={errors.password ? true : false}\n          onChange={onChange}\n        />\n        <Button type=\"submit\" primary>\n          Login\n        </Button>\n      </Form>\n      {Object.keys(errors).length > 0 && (\n        <div className=\"ui error message\">\n          <ul className=\"list\">\n            {Object.values(errors).map((value) => (\n              <li key={value}>{value}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}