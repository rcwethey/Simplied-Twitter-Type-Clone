{"ast":null,"code":"var _jsxFileName = \"/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/Pages/SinglePost.js\";\nimport React, { useContext, useState, useRef } from 'react';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport moment from 'moment';\nimport { Card, Grid, Image, Form, Transition } from 'semantic-ui-react';\nimport { AuthContext } from '../context/auth';\nimport { FETCH_POST_QUERY, SUBMIT_COMMENT_MUTATION } from '../util/graphQL';\nimport LikeButton from '../components/likeButton';\nimport DeleteButton from '../components/deleteButton';\nimport CommentButton from '../components/commentButton';\n\nconst SinglePost = props => {\n  const postId = props.match.params.postId;\n  const {\n    user\n  } = useContext(AuthContext);\n  const commentInputRef = useRef(null);\n  const [comment, setComment] = useState('');\n  const {\n    data: {\n      getPost\n    } = {}\n  } = useQuery(FETCH_POST_QUERY, {\n    variables: {\n      postId\n    }\n  });\n  const [submitComment] = useMutation(SUBMIT_COMMENT_MUTATION, {\n    update: () => {\n      setComment('');\n      commentInputRef.current.blur();\n    },\n    variables: {\n      postId,\n      body: comment\n    }\n  });\n\n  const deletePostCallback = () => props.history.push('/');\n\n  let postMarkup;\n\n  if (!getPost) {\n    //TODO: Put a spinner here\n    postMarkup = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 18\n      }\n    }, \"Loading...\");\n  } else {\n    const {\n      id,\n      body,\n      createdAt,\n      username,\n      comments,\n      likes,\n      likeCount,\n      commentCount\n    } = getPost;\n    postMarkup = /*#__PURE__*/React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: \"https://react.semantic-ui.com/images/avatar/large/molly.png\",\n      size: \"small\",\n      float: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    }, username), /*#__PURE__*/React.createElement(Card.Meta, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }, moment(createdAt).fromNow()), /*#__PURE__*/React.createElement(Card.Description, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }, body)), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Card.Content, {\n      extra: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(LikeButton, {\n      user: user,\n      post: {\n        id,\n        likeCount,\n        likes\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(CommentButton, {\n      user: user,\n      post: {\n        id,\n        comments,\n        commentCount\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }), user && user.username === username && /*#__PURE__*/React.createElement(DeleteButton, {\n      postId: id,\n      callback: deletePostCallback,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 58\n      }\n    }))), user && /*#__PURE__*/React.createElement(Card, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 19\n      }\n    }, \"Post a Comment\"), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui action input fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Comment...\",\n      name: \"comment\",\n      value: comment,\n      onChange: e => setComment(e.target.value),\n      ref: commentInputRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"ui button teal\",\n      disabled: comment.trim() === '',\n      onClick: submitComment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 23\n      }\n    }, \"Submit\"))))), /*#__PURE__*/React.createElement(Transition.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, comments.map(comment => /*#__PURE__*/React.createElement(Card, {\n      fluid: true,\n      key: comment.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 19\n      }\n    }, user && user.username === comment.username && /*#__PURE__*/React.createElement(DeleteButton, {\n      postId: id,\n      commentId: comment.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }\n    }, comment.username), /*#__PURE__*/React.createElement(Card.Meta, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, moment(createdAt).fromNow()), /*#__PURE__*/React.createElement(Card.Description, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, comment.body))))))));\n  }\n\n  return postMarkup;\n};\n\nexport default SinglePost;","map":{"version":3,"sources":["/Users/ryanwethey/Documents/Developer/graphQL Projects/MERNG/client/src/Pages/SinglePost.js"],"names":["React","useContext","useState","useRef","useQuery","useMutation","moment","Card","Grid","Image","Form","Transition","AuthContext","FETCH_POST_QUERY","SUBMIT_COMMENT_MUTATION","LikeButton","DeleteButton","CommentButton","SinglePost","props","postId","match","params","user","commentInputRef","comment","setComment","data","getPost","variables","submitComment","update","current","blur","body","deletePostCallback","history","push","postMarkup","id","createdAt","username","comments","likes","likeCount","commentCount","fromNow","e","target","value","trim","map"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useRef } from 'react';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport moment from 'moment';\nimport { Card, Grid, Image, Form, Transition} from 'semantic-ui-react';\nimport { AuthContext } from '../context/auth';\nimport {FETCH_POST_QUERY, SUBMIT_COMMENT_MUTATION} from '../util/graphQL';\nimport LikeButton from '../components/likeButton';\nimport DeleteButton from '../components/deleteButton';\nimport CommentButton from '../components/commentButton';\n\nconst SinglePost = props => {\n  const postId = props.match.params.postId;\n  const { user } = useContext(AuthContext);\n  const commentInputRef = useRef(null);\n  const [comment, setComment] = useState('');\n  const { data: { getPost } ={}} = useQuery(FETCH_POST_QUERY, { variables: {postId} });\n  const [submitComment] = useMutation(SUBMIT_COMMENT_MUTATION,{\n    update: () => {\n      setComment('');\n      commentInputRef.current.blur();\n    },\n    variables: { postId, body: comment}\n  });\n  const deletePostCallback = () => props.history.push('/');\n  let postMarkup;\n\n  if (!getPost) {\n    //TODO: Put a spinner here\n    postMarkup = <p>Loading...</p>\n  } else {\n    const { id, body, createdAt, username, comments, likes, likeCount, commentCount } = getPost;\n    postMarkup = (\n      <Grid>\n        <Grid.Row>\n          <Grid.Column width={2}>\n            <Image\n              src=\"https://react.semantic-ui.com/images/avatar/large/molly.png\"\n              size=\"small\"\n              float=\"right\"\n            />\n          </Grid.Column>\n          <Grid.Column width={10}>\n            <Card fluid>\n              <Card.Content>\n                <Card.Header>{username}</Card.Header>\n                <Card.Meta>{moment(createdAt).fromNow()}</Card.Meta>\n                <Card.Description>{body}</Card.Description>\n              </Card.Content>\n              <hr />\n              <Card.Content extra>\n                <LikeButton user={user} post={{ id, likeCount, likes }} />\n                <CommentButton user={user} post={{id, comments, commentCount}} /> \n                {user && user.username === username && ( <DeleteButton postId={id} callback={deletePostCallback} /> )}\n              </Card.Content>\n            </Card>\n            {user && (\n              <Card fluid>\n                <Card.Content>\n                  <p>Post a Comment</p>\n                  <Form>\n                    <div className=\"ui action input fluid\">\n                      <input type=\"text\" placeholder=\"Comment...\" name=\"comment\" value={comment} onChange={e => setComment(e.target.value)} ref={commentInputRef}/>\n                      <button type=\"submit\" className=\"ui button teal\" disabled={comment.trim() === ''} onClick={submitComment}>Submit</button>\n                    </div>\n                  </Form>\n                </Card.Content>\n              </Card>\n            )}\n            <Transition.Group>\n              {comments.map(comment => (\n                <Card fluid key={comment.id}>\n                  <Card.Content>\n                    {user && user.username === comment.username && (\n                      <DeleteButton postId={id} commentId={comment.id} />\n                    )}\n                    <Card.Header>{comment.username}</Card.Header>\n                    <Card.Meta>{moment(createdAt).fromNow()}</Card.Meta>\n                    <Card.Description>{comment.body}</Card.Description>\n                  </Card.Content>\n                </Card>\n              ))}\n            </Transition.Group>\n            \n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    );\n  }\n  return postMarkup;\n}\n\nexport default SinglePost;"]},"metadata":{},"sourceType":"module"}